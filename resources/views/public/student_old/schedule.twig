{% set lang = Schola.language('student') %}

{% extends "@Schola/public/layout/master.twig" %}

{% block title %}{{ lang.schedule }}{% endblock %}

{% block head %}
    <script src="{{ Schola.helper( 'assetUrl' , '/public/js/student/schedule.js' ) }}" type="text/javascript"></script>
    <script type="text/javascript">
        var URL = {
            getScheduleGrid:'{{ route_url('Schola::schola-student-schedule-grid') }}',
            updateSchedule:'{{ route_url('Schola::schola-student-schedule-update') }}',
			scheduleDetail:'{{ route_url('Schola::schola-student-schedule-detail') }}',
			classRoom:'{{route_url('Schola::classroom')}}',
			deleteSchedule:'{{route_url('Schola::schola-student-schedule-delete')}}',
			getLession:'{{route_url('Schola::schola-student-get-lesson')}}',
			classDetail:'{{route_url('Schola::schola-class-detail')}}',
			action: '{{ route_url('Schola::schola_student_action')}}'
        };
        $(document).ready(function(){
           scheduleView.init(URL);
        });
    </script>
{% endblock %}

{% block content %}
    <div>
        {% include "@Schola/public/partial/navigation.twig" %}
    </div>
    <input type="hidden" value="{{ lesson_id }}" id="lesson_id" />
    <div class="container-fluid">
        <div class="content-width">
            <div class="panel-content">
                <div class="row student-dashboard">
                    <div class="col-md-2 col-sm-12 col-xs-12">
                        {% include "@Schola/public/student_old/leftPanel.twig" %}
                    </div>
                    <div class="col-md-10 col-sm-12 col-xs-12">
						{%if scheduleGrid.hasPurchase == true and scheduleGrid.isApprove %}
							<div class="schedule-board">
								<div class="schedule-table">
									<div class="filter-teacher">
										<div class="filter-radio">
                                            <div class="radio radio-orange radio-inline">
                                                <input type="radio" name="choiceTeacherType" id="allTeacher" value="1" checked="checked">
                                                <label for="allTeacher">{{ lang.all_teacher }}</label>
                                            </div>
                                            <div class="radio radio-orange radio-inline">
                                                <input type="radio" name="choiceTeacherType" id="previousTeacher" value="2">
                                                <label for="previousTeacher">{{ lang.previous }}</label>
                                            </div>
                                            <div class="radio radio-orange radio-inline">
                                                <input type="radio" name="choiceTeacherType" id="recommendedTeacher" value="3">
                                                <label for="recommendedTeacher">{{lang.recommended}}</label>
                                            </div>
                                            <div class="radio radio-orange radio-inline">
                                                <input type="radio" name="choiceTeacherType" id="favoriteTeacher" value="4">
                                                <label for="favoriteTeacher">{{ lang.favorite }}</label>
                                            </div>
                                        </div>
                                        <div class="filter-dropdown">
                                            <div class="dropdown dropdown-custom" id="filterTeacher">
                                                <button class="btn btn-default dropdown-toggle" type="button"
                                                        id="dropdownFilterTeacher" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    <span class="dropdown-label">{{ lang.all_teacher }}</span>
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu" aria-labelledby="dropdownFilterTeacher">
                                                    <li><a data-type="1" href="javascript:void(0)">{{ lang.all_teacher }}</a></li>
                                                    <li><a data-type="2" href="javascript:void(0)">{{ lang.previous }}</a></li>
                                                    <li><a data-type="3" href="javascript:void(0)">{{ lang.recommended }}</a></li>
                                                    <li><a data-type="4" href="javascript:void(0)">{{ lang.favorite }}</a></li>
                                                </ul>
                                            </div>
                                        </div>
									</div>

									<div class="list-teacher clearfix" id="listSelectedTeacher">
										{% include "@Schola/public/student_old/listTeacher.twig" %}
									</div>
									<div class="choice-week">
                                        <div class="hidden-xs">
                                            <div class="radio radio-orange radio-inline">
                                                <input type="radio" name="choiceWeek" id="thisWeek" value="{{ currentWeek + 0 }}" checked="checked">
                                                <label for="thisWeek">{{ lang.this_weed }}</label>
                                            </div>
                                            <div class="radio radio-orange radio-inline">
                                                <input type="radio" name="choiceWeek" id="nextWeek" value="{{ currentWeek + 1 }}">
                                                <label for="nextWeek">{{ lang.next_week }}</label>
                                            </div>
                                            <div class="radio radio-orange radio-inline">
                                                <input type="radio" name="choiceWeek" id="afterNextWeek" value="{{ currentWeek + 2 }}">
                                                <label for="afterNextWeek">{{ lang.the_week_after_next }}</label>
                                            </div>
                                        </div>

                                        <div class="filter-week hidden visible-xs">
                                            <div class="dropdown dropdown-custom" id="filterWeek">
                                                <button class="btn btn-default dropdown-toggle" type="button"
                                                        id="dropdownFilterWeek" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    <span class="dropdown-label">{{ lang.this_weed }}</span>
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu" aria-labelledby="dropdownFilterWeek">
                                                    <li><a data-week="{{ currentWeek + 0 }}" href="javascript:void(0)">{{ lang.this_weed }}</a></li>
                                                    <li><a data-week="{{ currentWeek + 1 }}" href="javascript:void(0)">{{ lang.next_week }}</a></li>
                                                    <li><a data-week="{{ currentWeek + 2 }}" href="javascript:void(0)">{{ lang.the_week_after_next }}</a></li>
                                                </ul>
                                            </div>
                                        </div>

										{#
										<div style="float:right">
											<select class="select-single" id="selectTeacher">
												<option value="0" label="{{lang.all_teacher}}">{{lang.all_teacher}}</option>
												{%for teacher in scheduleGrid.listTeacher%}
													<option value="{{teacher.teacher_id}}" label="{{teacher.teacher_firstname ~ ' ' ~ teacher.teacher_lastname}}">
														{{teacher.teacher_firstname ~ ' ' ~ teacher.teacher_lastname}}
													</option>
												{%endfor%}
											</select>
										</div>
										#}
                                        {# Temp selected teacher id #}
										<input type="hidden" id="selectTeacher" />
									</div>
									<div id="scheduleGridContent" class="relative overflow-hidden">
                                        <div class="schedule-grid-content">
                                            {% include "@Schola/public/student_old/scheduleGrid.twig" %}
                                        </div>
                                        <div class="shadow-grid-scroll"></div>
									</div>
								</div>
							</div>
						{%else%}
                            <div class="no-class-panel">
                                <div class="icon-img not-purchase"></div>
                                <h3 class="text">
                                    {{ lang.you_not_approved }}
                                </h3>
                                <div class="text-center">
                                    <div class="form-group custom inline-block">
                                        <div class="control-item">
                                            <button type="button" onclick="Schola.common.toogleTawkChat();"
                                                    class="button button--saqui button--inverted button--round-l button--text-thin button--size-s"
                                                    data-text="{{ lang.chat_to_purchase }}">
                                                {{ lang.chat_to_purchase }}
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
						{%endif%}
                    </div>
                </div>
                <div>
                    {%if scheduleGrid.hasPurchase == true and scheduleGrid.isApprove %}
						<div id="pnlDialogSelectLesson" class="schedule-board">
							<!-- Include lesson dropdown dialog here -->
						</div>
                    {%else%}
                    <div id="dialogScheduleLesson" class="modal fade" role="dialog" data-backdrop="static">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">{{ lang.chat }}</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="student-dashboard">
                                        <div class="no-class-panel">
                                            <div class="icon-img not-purchase"></div>
                                            <h3 class="text">
                                                {{ lang.you_not_approved }}
                                            </h3>
                                            <div class="text-center">
                                                <div class="form-group custom inline-block">
                                                    <div class="control-item">
                                                        <button type="button" onclick="Schola.common.toogleTawkChat();"
                                                                class="button button--saqui button--inverted button--round-l button--text-thin button--size-s"
                                                                data-text="{{ lang.chat_to_purchase }}">
                                                            {{ lang.chat_to_purchase }}
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {%endif%}
                </div>
				<!-- Show teacher profile -->
				<div id="pnlDialogTeacherProfile">
				</div>

                <div>
                    <!-- Confirm cancel class -->
                    {%include "@Schola/public/student_old/dialogConfirmCancelClass.twig"%}
                </div>
            </div>
        </div>
    </div>
{% endblock %}